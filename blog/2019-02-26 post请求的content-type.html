<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>19-02-26 post请求的content-type | guidetheorient&#39;s blog</title>
    <meta name="description" content="guidetheorients blog">
    
    
    <link rel="preload" href="/blog/assets/css/0.styles.27863952.css" as="style"><link rel="preload" href="/blog/assets/js/app.07784aa4.js" as="script"><link rel="preload" href="/blog/assets/js/2.c1200efd.js" as="script"><link rel="preload" href="/blog/assets/js/12.d7dfe4ee.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.3a7b220f.js"><link rel="prefetch" href="/blog/assets/js/11.3e73d5a8.js"><link rel="prefetch" href="/blog/assets/js/13.dad9285b.js"><link rel="prefetch" href="/blog/assets/js/14.bb3ef809.js"><link rel="prefetch" href="/blog/assets/js/15.26aead84.js"><link rel="prefetch" href="/blog/assets/js/16.abdcc1ca.js"><link rel="prefetch" href="/blog/assets/js/17.8c2b56b4.js"><link rel="prefetch" href="/blog/assets/js/18.2f996232.js"><link rel="prefetch" href="/blog/assets/js/19.57a27d8e.js"><link rel="prefetch" href="/blog/assets/js/20.d350c752.js"><link rel="prefetch" href="/blog/assets/js/21.4601c4a8.js"><link rel="prefetch" href="/blog/assets/js/22.b4ceb77d.js"><link rel="prefetch" href="/blog/assets/js/23.b0a3c965.js"><link rel="prefetch" href="/blog/assets/js/24.61ff9cb3.js"><link rel="prefetch" href="/blog/assets/js/25.27cc9eae.js"><link rel="prefetch" href="/blog/assets/js/26.e7e9edc1.js"><link rel="prefetch" href="/blog/assets/js/27.c899df60.js"><link rel="prefetch" href="/blog/assets/js/28.b2b385cc.js"><link rel="prefetch" href="/blog/assets/js/29.f02fe8e6.js"><link rel="prefetch" href="/blog/assets/js/3.e024d095.js"><link rel="prefetch" href="/blog/assets/js/30.6be7fb62.js"><link rel="prefetch" href="/blog/assets/js/31.a185d491.js"><link rel="prefetch" href="/blog/assets/js/32.e66e9655.js"><link rel="prefetch" href="/blog/assets/js/33.ce2b576f.js"><link rel="prefetch" href="/blog/assets/js/34.1a39b0e8.js"><link rel="prefetch" href="/blog/assets/js/35.ae12a9aa.js"><link rel="prefetch" href="/blog/assets/js/36.e949c413.js"><link rel="prefetch" href="/blog/assets/js/37.370df086.js"><link rel="prefetch" href="/blog/assets/js/38.b8209320.js"><link rel="prefetch" href="/blog/assets/js/39.a710c350.js"><link rel="prefetch" href="/blog/assets/js/4.e0c6271b.js"><link rel="prefetch" href="/blog/assets/js/40.3d443225.js"><link rel="prefetch" href="/blog/assets/js/41.13a31490.js"><link rel="prefetch" href="/blog/assets/js/42.9212c90b.js"><link rel="prefetch" href="/blog/assets/js/43.fe269efc.js"><link rel="prefetch" href="/blog/assets/js/44.72495e31.js"><link rel="prefetch" href="/blog/assets/js/45.0e0075bc.js"><link rel="prefetch" href="/blog/assets/js/46.41b4a3b1.js"><link rel="prefetch" href="/blog/assets/js/47.9fe3c288.js"><link rel="prefetch" href="/blog/assets/js/48.8a35d4da.js"><link rel="prefetch" href="/blog/assets/js/49.34e75339.js"><link rel="prefetch" href="/blog/assets/js/5.eaff2270.js"><link rel="prefetch" href="/blog/assets/js/50.3c3599ad.js"><link rel="prefetch" href="/blog/assets/js/51.dcf810cf.js"><link rel="prefetch" href="/blog/assets/js/52.7686693f.js"><link rel="prefetch" href="/blog/assets/js/53.5d121b7b.js"><link rel="prefetch" href="/blog/assets/js/54.8e67ae1d.js"><link rel="prefetch" href="/blog/assets/js/55.52b11df8.js"><link rel="prefetch" href="/blog/assets/js/56.35cb1f97.js"><link rel="prefetch" href="/blog/assets/js/57.a5ce68db.js"><link rel="prefetch" href="/blog/assets/js/58.1578629a.js"><link rel="prefetch" href="/blog/assets/js/59.5fa52b94.js"><link rel="prefetch" href="/blog/assets/js/6.e3b4f500.js"><link rel="prefetch" href="/blog/assets/js/60.3b56f664.js"><link rel="prefetch" href="/blog/assets/js/61.dcd6bc74.js"><link rel="prefetch" href="/blog/assets/js/62.a5c3be46.js"><link rel="prefetch" href="/blog/assets/js/63.0260a90d.js"><link rel="prefetch" href="/blog/assets/js/64.2d91dc0a.js"><link rel="prefetch" href="/blog/assets/js/65.aa6cb1f4.js"><link rel="prefetch" href="/blog/assets/js/66.917856d3.js"><link rel="prefetch" href="/blog/assets/js/67.9a3747eb.js"><link rel="prefetch" href="/blog/assets/js/68.fea047fa.js"><link rel="prefetch" href="/blog/assets/js/69.939a3137.js"><link rel="prefetch" href="/blog/assets/js/7.b6791622.js"><link rel="prefetch" href="/blog/assets/js/70.f827108e.js"><link rel="prefetch" href="/blog/assets/js/71.e5fc8632.js"><link rel="prefetch" href="/blog/assets/js/72.5bc34333.js"><link rel="prefetch" href="/blog/assets/js/73.7cd68ac8.js"><link rel="prefetch" href="/blog/assets/js/74.791c31cd.js"><link rel="prefetch" href="/blog/assets/js/75.62ad0f0c.js"><link rel="prefetch" href="/blog/assets/js/76.9768b570.js"><link rel="prefetch" href="/blog/assets/js/77.3c42697a.js"><link rel="prefetch" href="/blog/assets/js/78.8c955780.js"><link rel="prefetch" href="/blog/assets/js/79.2f810987.js"><link rel="prefetch" href="/blog/assets/js/8.1e06d97d.js"><link rel="prefetch" href="/blog/assets/js/80.90f0b386.js"><link rel="prefetch" href="/blog/assets/js/81.5b1df5fd.js"><link rel="prefetch" href="/blog/assets/js/9.06767110.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.27863952.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">guidetheorient's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://github.com/guidetheorient/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github 
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://github.com/guidetheorient/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github 
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计划</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>blog</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/blog/" class="sidebar-link">Introduction</a></li><li><a href="/blog/blog/blog选题.html" class="sidebar-link">博客选题</a></li><li><a href="/blog/blog/职业生涯.html" class="sidebar-link">职业生涯</a></li><li><a href="/blog/blog/2018-12-20 学习资源.html" class="sidebar-link">学习资源整理</a></li><li><a href="/blog/blog/2018-12-19 git撤销操作总结.html" class="sidebar-link">18-12-19 git撤销操作总结</a></li><li><a href="/blog/blog/2018-12-19 Vue使用小结.html" class="sidebar-link">18-12-19 Vue使用小结</a></li><li><a href="/blog/blog/2018-12-19 开发小结.html" class="sidebar-link">18-12-19 开发小结</a></li><li><a href="/blog/blog/2019-02-22 vue-cli2升级到webpack4.x.html" class="sidebar-link">19-02-22 vue-cli2升级至webpack4.x</a></li><li><a href="/blog/blog/2019-02-25 webpack splitchunks试验.html" class="sidebar-link">19-02-25 webpack splitchunks试验</a></li><li><a href="/blog/blog/2019-02-26 post请求的content-type.html" class="active sidebar-link">19-02-26 post请求的content-type</a></li><li><a href="/blog/blog/2019-02-27 vue插件编写小结.html" class="sidebar-link">19-02-27 vue插件编写小结</a></li><li><a href="/blog/blog/2019-02-28 了解FLIP动画.html" class="sidebar-link">19-02-28 了解FLIP动画</a></li><li><a href="/blog/blog/2019-03-06 eslint配置指南.html" class="sidebar-link">19-03-06 eslint配置指南</a></li><li><a href="/blog/blog/2019-04-07 requestAnimationFrame.html" class="sidebar-link">19-04-07 requestAnimationFrame</a></li><li><a href="/blog/blog/你不知道的Chrome调试技巧.html" class="sidebar-link">你不知道的Chrome调试技巧</a></li><li><a href="/blog/blog/如何使用Canvas制作出炫酷的网页背景特效.html" class="sidebar-link">如何使用Canvas制作出炫酷的网页背景特效</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>资源整理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ECMAScript 6 入门</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript高级程序设计</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Pro Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS世界</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript设计模式与开发实践</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>图解HTTP</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="_19-02-26-post请求的content-type"><a href="#_19-02-26-post请求的content-type" aria-hidden="true" class="header-anchor">#</a> 19-02-26 post请求的content-type</h1> <blockquote><p>参考<br>
1.<a href="https://imququ.com/post/four-ways-to-post-data-in-http.html" target="_blank" rel="noopener noreferrer">四种常见的 POST 提交数据方式 - Jerry Qu<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 🏃再看一遍？<br>
2.<a href="https://www.w3.org/TR/html401/interact/forms.html#h-17.13.4" target="_blank" rel="noopener noreferrer">Form content types<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br>
3.<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST" target="_blank" rel="noopener noreferrer">POST - MDN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br>
4.<a href="https://www.kancloud.cn/yunye/axios/234845" target="_blank" rel="noopener noreferrer">axios 中文说明<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br>
5.<a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/send" target="_blank" rel="noopener noreferrer">XMLHttpRequest.send() - MDN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><br>
6.<a href="https://javarevisited.blogspot.com/2017/06/difference-between-applicationx-www-form-urlencoded-vs-multipart-form-data.html" target="_blank" rel="noopener noreferrer">Difference between application/x-www-form-urlencoded and multipart/form-data in HTTP/HTML?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p></p><div class="table-of-contents"><ul><li><a href="#疑问">疑问</a></li><li><a href="#content-type类型">content-type类型</a><ul><li><a href="#属性值">属性值</a></li><li><a href="#相关问题">相关问题</a></li></ul></li><li><a href="#axios和jquery默认请求方式区别">axios和jQuery默认请求方式区别</a><ul><li><a href="#原生ajax">原生AJAX</a></li><li><a href="#axios">axios</a></li><li><a href="#jquery">jQuery</a></li></ul></li><li><a href="#todo">TODO</a></li></ul></div><p></p> <div class="tip custom-block"><p class="custom-block-title">TODO</p> <p>nodejs或java中实测一下，不过现在还不会😆</p></div> <h2 id="疑问"><a href="#疑问" aria-hidden="true" class="header-anchor">#</a> 疑问</h2> <ol><li>为什么post(x-www-form-urlencoded)请求的参数最终也转换成键值对的形式。难道这是get请求，还是后台接口同时支持get和的post两种方法</li> <li>跨域options</li> <li>axios是不是只要data是对象，就stringify</li></ol> <h2 id="content-type类型"><a href="#content-type类型" aria-hidden="true" class="header-anchor">#</a> content-type类型</h2> <p>HTTP协议规定POST请求提交的数据必须放在请求主体里，但没有规定格式</p> <h3 id="属性值"><a href="#属性值" aria-hidden="true" class="header-anchor">#</a> 属性值</h3> <ul><li><p>get请求没有content-type项</p></li> <li><p>原生form表单支持通过设置enctype来设置一下三种格式：</p> <ul><li>application/x-www-form-urlencoded(默认)</li> <li>multipart/form-data(文件)</li> <li>text/plain(不常用)</li></ul></li> <li><p>ajax请求中除了使用上述几种外，还经常使用：</p> <ul><li>application/json</li></ul></li></ul> <h3 id="相关问题"><a href="#相关问题" aria-hidden="true" class="header-anchor">#</a> 相关问题</h3> <p><strong>1.get和post application/x-www-form-urlencoded的区别？</strong></p> <p>问题缘由：</p> <ol><li>后台使用java spring，所以一直很奇怪所有接口都可以使用get和post吗？那干脆就全使用get(当然除了上传或是复杂数据)</li> <li>这还让我一度怀疑get === post application/x-www-form-urlencoded？大雾😭</li></ol> <p>结论：</p> <ol><li>从以下请求可以看出get参数确实是url后面键值对的形式，x-www-form-urlencoded同样是键值对形式，不过是将其放在请求实体中</li> <li>这种键值对也基本就相当于字符串(get的location.search)</li> <li>还需要注意的是这两种格式无法直接传输复杂数据层次的对象(当然单独将value stringify其实也可以，不过不如直接使用application/json)</li></ol> <div class="language-http extra-class"><pre class="language-http"><code><span class="token request-line"><span class="token property">GET</span> /hb2/rest/alarm/get.do?alarmId=123928&amp;b=2 HTTP/1.1</span>
</code></pre></div><div class="language-http extra-class"><pre class="language-http"><code><span class="token request-line"><span class="token property">POST</span> /hb2/rest/alarm/get.do HTTP/1.1</span>
<span class="token header-name keyword">Content-Type:</span> application/x-www-form-urlencoded
alarmId=123928&amp;b=2
</code></pre></div><p><strong>2. post application/x-www-form-urlencoded 和 application/json？</strong><br>
json格式可以传输比键值对更复杂的结构化数据（项目刚开始还没文档时，axios默认传的就是json，后台并没有对应解析逻辑，这时会问题）</p> <h2 id="axios和jquery默认请求方式区别"><a href="#axios和jquery默认请求方式区别" aria-hidden="true" class="header-anchor">#</a> axios和jQuery默认请求方式区别</h2> <p>axios默认将对象类型的data进行json.stringify。即使声明了<code>application/x-www-form-urlencoded</code>也不会将data变成键值对的形式，需要自行转换，比如使用<a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer">URLSearchParams<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>或者querystring模块</p> <div class="tip custom-block"><p class="custom-block-title">axios文档关于data的说明</p> <p><code>data</code> 是作为请求主体被发送的数据<br>
只适用于这些请求方法 'PUT', 'POST', 和 'PATCH'<br>
在没有设置 <code>transformRequest</code> 时，必须是以下类型之一：</p> <ul><li>string, plain object, ArrayBuffer, ArrayBufferView, URLSearchParams</li> <li>浏览器专属：FormData, File, Blob</li> <li>Node 专属： Stream</li></ul></div> <h3 id="原生ajax"><a href="#原生ajax" aria-hidden="true" class="header-anchor">#</a> 原生AJAX</h3> <ul><li>send支持的格式
<img src="/blog/assets/img/2019-02-26-14-40-39.bfc9324e.png" alt=""></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 原生XMLHttpRequest作对比</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">304</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">,</span> <span class="token string">'xhr'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'post'</span><span class="token punctuation">,</span> <span class="token string">'/alarm/get.do'</span><span class="token punctuation">)</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">)</span>
<span class="token comment">// 参见XMLHttpRequest.send - MDN https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/send</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'alarmId=123928'</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="axios"><a href="#axios" aria-hidden="true" class="header-anchor">#</a> axios</h3> <p>默认content-type: 'application/json'，data也会自动转换为json字符串</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 默认，只声明content-type为x-www-form-urlencoded是不起作用的，要同时将data处理成键值对字符串(如果不转换，相当于axios帮你stringify，然后一个string只能当form data的key，然后value为空，反正就是双拼两不像)</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  method<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
  url<span class="token punctuation">:</span> <span class="token string">'/alarm/get.do'</span><span class="token punctuation">,</span>
  headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    alarmId<span class="token punctuation">:</span> <span class="token number">123928</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 解决方式1 - 使用URLSearchParams API(不兼容IE)</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'alarmId'</span><span class="token punctuation">,</span> <span class="token number">123928</span><span class="token punctuation">)</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ~~~</span>
  headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  data
  <span class="token comment">// ~~~</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 解决方式2 - 使用node模块querystring</span>
<span class="token comment">// data value支持&lt;string&gt; | &lt;number&gt; | &lt;boolean&gt; | &lt;string[]&gt; | &lt;number[]&gt; | &lt;boolean[]&gt;。 任何其他输入值都将被强制转换为空字符串</span>
<span class="token keyword">import</span> qs <span class="token keyword">from</span> <span class="token string">'querystring'</span>
<span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ~~~</span>
  headers<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    alarmId<span class="token punctuation">:</span> <span class="token number">123928</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">// ~~~</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="jquery"><a href="#jquery" aria-hidden="true" class="header-anchor">#</a> jQuery</h3> <p>默认content-type: 'application/x-www-form-urlencoded'，data会转换为是键值对string</p> <p>jQuery application/x-www-form-urlencoded
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAokAAABICAMAAACtIp8rAAAAyVBMVEX///9hYWFzc3MiIiLv7+/d3d3Ly8vO//+GIiJiq+qpqan//87OhyJherOzemEih84iIob//+aXl5fqq2Lm//+FhYWGy///y4bmsnq6uroiImKp5////+oiYalhYXqpYSKz5v96YWHq//+Uzf//5rP/56lhYZRxcnJiIiLMlmF6suZhlsz/zZT8/PzY2NiUYWH//8zhzI3r6+t4eHjM/+aRkZHO/+rq/86p586Gy85ih87m/8zFxcXm5rOzzbOfn5+pq4apYYZiImK2CCqaAAAEn0lEQVR42uyY3WrcMBCF5UFyQZBCRQWrm9BlS4KzcZImzVX/3v+tOqMTr9Y0NLs0JWs4H0lsHc346mNsxRFCCCGEEEIIIYQQQgghhBBCyGuSsnslgnhHFsqH951x/skdwOd1V9nM4+HsI00kb2FiZ+q1J9jyJKCJS2IMN0/cH+cRTLxy7u6267Y0kfwjY5HLykM/8wjT8eKdc6vu/Of64qtu/FjrsLRBuNkz0VTU2A2dstUMQ3KFizuYIpAnxKRXLyLROSnT61pToxenO6lWKt4Sb9eMFfqUpDc0cVGMj5eG/BqbidBLMcWqU2Zi5XINQfdMtIqNNhrbycShO1JFLz2EM+eCLaTAv6pYLjARC42TXmO2xGpyVJf91Ad7g9DERXHzYCJm3yYhTFIJVauteba1DQ1s96qKNzPx2lJjUEfhcmVlzziYVK3rq305Vuvsx4WUe+chlQYBk9MWliLxCFpfLS80cVGMUdTE7+PMxG+3qh/Ugk8QrN5fP2PiBlNUt1GIJ1l+ML3gN6YqFj7z9CaWGF2fWxGE1SIlPCXZ/ra+mPiduEB8Fnkc5+eNO5i4mptY13+aOGhgHjYT4eFRJmIexicTgXepuBz6XDfmJmbd9TARKkpofTHSxCXSP+R796yJw4smolarLFxNJuKFjcJDMdsk7GYiKMlnFc9nBM1Eu5lMBFHCro8zcZmMqYwzE5X2nfiSiThMD7pdvyWrvSgcjjMxSD+dknPZZTbeUhEHegnwsWSsmonWNPWhPtLEpXHv3dxE+IVT8l9NBFdOd/bP2mdfsEThoUguMBHC+Wh65d7ESjsTRTek1EOLl8lEXywNrc8aep6dF8z8/4l2/7KJ0xDttlaqlRatoONRJmKGxQTjBCupk7G0mShSV8UKdiaKEvb79JL4dib/C/OOkBOAJpLTgCaS04AmEkIIIYQQQgghhBBCCPndnt20Ng4DYRz3Moc4RJCAwIakphAI9LqXfTvt7vf/UJ3R4zAVpC2lvbT8f4fI1UjO5WHk1AAAAAAAAAAAfD2zme2Ht9iN2wH4eHf3ryXx8mDueMokdtttWkdrV1Vr16spS2vuD5sBeHsSpeSaPon1+Nem64qqBK4XZTkPsxezNLdpooiPT+K8nCNsWcqLy//T0OKYJb+L4ghInpNKorISZ2iMU43abvw92lRsm0n00VzMpC6JWhb3WBNX25eopFhWeiLS5U9EcDlnEu/+bXSGeiKXs0/uxuOpfNtGcJRE7fD6s0m8PLSSIqckzrFdpfg4bGbjBw866k5KYkZpUvfyLP300Z/pMok6WFsSZ2takpVEBbWtrWZat4+PmFKpDcbZjE4x1yVR6ZquPS/G6G1Pk1g9ei/0xKIrdUAd94fvsV2lmN57TvcDcFW8NWVPVKDa8fmOJBbLgnZpi0r6pnU9IMpEJlF/vJ5Erbl9OlcFMQOom0xZijvGfpIIlz8pap7Oegb0kLx0OiuEvuZGT1RP7ed0HD8tFf6fiI6e4ZZ4hqsWWkJ8+DXeSmK+Y5nNDj/ut9191Bz9QovaCxWlV3t8TX4H71gAAAAAAAAAAAAAAAAAAPi0HgFxFGkR2eTTDQAAAABJRU5ErkJggg==" alt=""></p> <div class="language-js extra-class"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token punctuation">:</span> <span class="token string">'/alarm/get.do'</span><span class="token punctuation">,</span>
  method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
  <span class="token comment">// contentType: 'application/x-www-form-urlencoded',</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    alarmId<span class="token punctuation">:</span> <span class="token number">123928</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>jQuery applcation/json需要data必须是json字符串，content-type也要设置正确</p> <div class="language-js extra-class"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  url<span class="token punctuation">:</span> <span class="token string">'/alarm/get.do'</span><span class="token punctuation">,</span>
  method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
  contentType<span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    alarmId<span class="token punctuation">:</span> <span class="token number">123928</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="todo"><a href="#todo" aria-hidden="true" class="header-anchor">#</a> TODO</h2> <ol><li>跨域请求哪些会先发送options请求</li> <li>跨域</li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2/27/2019, 11:46:18 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/blog/2019-02-25 webpack splitchunks试验.html" class="prev">
          19-02-25 webpack splitchunks试验
        </a></span> <span class="next"><a href="/blog/blog/2019-02-27 vue插件编写小结.html">
          19-02-27 vue插件编写小结
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.07784aa4.js" defer></script><script src="/blog/assets/js/2.c1200efd.js" defer></script><script src="/blog/assets/js/12.d7dfe4ee.js" defer></script>
  </body>
</html>
